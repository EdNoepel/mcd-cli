#!/usr/bin/env bash
set -e
[ -n "$1" ] || mcd --fail "gem: Please specify a join amount"

mcd --require-ilk &>/dev/null
join=$(mcd gem adapter)
mcd --require-allowance $1 $ETH_FROM $join

# GemJoin.join(urn, wad)
urn=$(mcd --require-urn $0)
wei=$(seth --to-uint256 $(seth --to-wei $1 eth))
seth send "$join" "join(bytes32, uint)" $urn $wei

[[ $SETH_ASYNC != yes ]] && mcd gem balance
