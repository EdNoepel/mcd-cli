#!/usr/bin/env bash
set -e

case $MCD_ILK in
  "ETH") {
    adapter=$MCD_JOIN_ETH
  };;
  "REP") {
    adapter=$MCD_JOIN_REP
  };;
  *) {
    mcd --fail "gem: Unrecognised adapter $MCD_ILK"
  }
esac

wad=$(seth --to-word $(seth --to-wei $1 eth))
urn=$(seth --to-bytes32 $ETH_FROM)
(set -x; seth --status send $adapter "exit(bytes32, address, uint)" $urn $ETH_FROM $wad)
